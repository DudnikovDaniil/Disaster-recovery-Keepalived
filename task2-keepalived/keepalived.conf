vrrp_script check_web {
    script "/usr/local/bin/check_web_server.sh"
    interval 3
    timeout 1
    rise 2
    fall 2
}

vrrp_instance VI_1 {
    state MASTER
    interface enp0s3
    virtual_router_id 51
    priority 255
    advert_int 1
    
    virtual_ipaddress {
        192.168.111.100/24
    }
    
    track_script {
        check_web
    }
    
    notify_master "/bin/echo 'Became MASTER' >> /var/log/keepalived.log"
    notify_backup "/bin/echo 'Became BACKUP' >> /var/log/keepalived.log"
    notify_fault "/bin/echo 'Entered FAULT state' >> /var/log/keepalived.log"
}
